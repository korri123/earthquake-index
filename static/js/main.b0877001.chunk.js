(this.webpackJsonpearthquakes=this.webpackJsonpearthquakes||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var i,r,c,s=n(1),a=n.n(s),u=n(16),o=n.n(u),l=(n(26),n(4)),j=n.n(l),d=n(7),b=n(5),h=n(15),f=(n(28),function(e,t){var n=function(e,t){return e-t};return function(i,r){return t?n(e(i),e(r)):n(e(r),e(i))}}),O={newest:{name:"Newest",id:"newest",sortFunction:f((function(e){return e.getTime().getTime()}))},oldest:{name:"Oldest",id:"oldest",sortFunction:f((function(e){return e.getTime().getTime()}),!0)},size:{name:"Size",id:"size",sortFunction:f((function(e){return e.size}))},quality:{name:"Quality",id:"quality",sortFunction:f((function(e){return e.quality}))},depth:{name:"Depth",id:"depth",sortFunction:f((function(e){return e.depth}))},longitude:{name:"Longitude",id:"longitude",sortFunction:f((function(e){return e.longitude}))},latitude:{name:"Latitude",id:"latitude",sortFunction:f((function(e){return e.latitude}))}},x={sortOption:O.newest,setSortOption:function(){},pollTime:60,setPollTime:function(e){},nextRefreshTime:0},m=a.a.createContext(x),p=n(17),v=n(18),g=(n(29),n(14)),y=n(19),w=n(42),T=(n(30),function(){function e(){Object(g.a)(this,e),this.depth=void 0,this.humanReadableLocation=void 0,this.latitude=void 0,this.longitude=void 0,this.quality=void 0,this.size=void 0,this.timestamp=void 0}return Object(y.a)(e,[{key:"getTime",value:function(){return new Date(this.timestamp)}}]),e}()),S=(i=Object(w.a)((function(){return T})),r=function e(){Object(g.a)(this,e),Object(p.a)(this,"results",c,this)},c=Object(v.a)(r.prototype,"results",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r),z=n(0),k=function(e){var t=e.children;return Object(z.jsx)("div",{style:{flex:1,marginBottom:"1em",alignSelf:"center"},className:"list-column",children:t})},D=function(e){var t=e.children;return Object(z.jsx)(k,{children:Object(z.jsx)("h4",{children:t})})},q=function(e){var t=e.earthquake,n=t.depth,i=t.humanReadableLocation,r=t.latitude,c=t.longitude,s=t.quality,a=t.size;return Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",height:"4em"},className:"list-item",children:[Object(z.jsx)(k,{children:i}),Object(z.jsx)(k,{children:r}),Object(z.jsx)(k,{children:c}),Object(z.jsx)(k,{children:s}),Object(z.jsx)(k,{children:t.getTime().toDateString()}),Object(z.jsx)(k,{children:a}),Object(z.jsx)(k,{children:n})]})},C=function(e){var t=e.earthquakes;return Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},className:"earthquake-list",children:[Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%"},children:[Object(z.jsx)(D,{children:"Location"}),Object(z.jsx)(D,{children:"Latitude"}),Object(z.jsx)(D,{children:"Longitude"}),Object(z.jsx)(D,{children:"Quality"}),Object(z.jsx)(D,{children:"Time"}),Object(z.jsx)(D,{children:"Size"}),Object(z.jsx)(D,{children:"Depth"})]}),t.results.map((function(e){return Object(z.jsx)(q,{earthquake:e},e.humanReadableLocation+e.timestamp)}))]})},F=n(13),N=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://apis.is/earthquake/is");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",Object(F.a)(S,n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e,t,n){e(n),t.current=n},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]},E=(n(37),function(){var e=Object(s.useContext)(m).setSortOption;return Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(z.jsx)("div",{className:"toolbar-label",children:"Sort by"}),Object(z.jsx)("select",{onChange:function(t){return e(O[t.currentTarget.value])},children:Object.values(O).map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})}),I=function(){var e=Object(s.useContext)(m),t=e.pollTime,n=e.setPollTime;return Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(z.jsx)("div",{className:"toolbar-label",children:"Refresh time"}),Object(z.jsx)("input",{type:"number",value:t,onChange:function(e){n(parseFloat(e.currentTarget.value))},style:{width:"5em",height:"2.1em",textAlign:"center",color:"#888",fontSize:"1em"}}),Object(z.jsx)("div",{className:"toolbar-label",children:"seconds"})]})},A=function(){var e=Object(s.useContext)(m).nextRefreshTime,t=Object(s.useCallback)((function(){return Math.floor((e-(new Date).getTime())/1e3)}),[e]),n=Object(s.useState)(t()),i=Object(b.a)(n,2),r=i[0],c=i[1],a=Object(s.useState)(),u=Object(b.a)(a,2),o=u[0],l=u[1],j=Object(s.useRef)(o),d=function(){return j.current&&clearInterval(j.current)};return Object(s.useEffect)((function(){d();var e=setInterval((function(){c(t())}),1e3);return R(l,j,e),L("reinitializing visual timer"),function(){d()}}),[t]),Object(z.jsx)("div",{children:Object(z.jsxs)("span",{children:["Refreshing in ",Object(z.jsx)("b",{children:r>=0?r:0})," seconds"]})})},B=function(){return Object(z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"toolbar",children:[Object(z.jsx)(I,{}),Object(z.jsx)(A,{}),Object(z.jsx)(E,{})]})},M=function(e){var t=e.title,n=e.result;return Object(z.jsxs)("div",{className:"insight-item",children:[Object(z.jsx)("div",{children:Object(z.jsx)("h2",{children:t})}),Object(z.jsx)("div",{children:Object(z.jsx)("h1",{children:n})})]})},P=function(e){var t=e.averageSize,n=e.latestDate,i=e.biggest;return Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"1em"},children:[Object(z.jsx)(M,{title:"Avg. Size",result:t.toFixed(2)}),Object(z.jsx)(M,{title:"Latest",result:n.toDateString()}),Object(z.jsx)(M,{title:"Biggest",result:i.toFixed(2)})]})},J=function(){var e=Object(s.useState)(new S),t=Object(b.a)(e,2),n=t[0],i=t[1],r=Object(s.useState)(O.newest),c=Object(b.a)(r,2),a=c[0],u=c[1],o=Object(s.useState)(60),l=Object(b.a)(o,2),f=l[0],x=l[1],p=Object(s.useState)(),v=Object(b.a)(p,2),g=v[0],y=v[1],w=Object(s.useRef)(g),T=Object(s.useCallback)((function(){return(new Date).getTime()+1e3*f}),[f]),k=Object(s.useState)(T()),D=Object(b.a)(k,2),q=D[0],F=D[1],E=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("fetching new data from server..."),e.t0=i,e.next=4,N();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(s.useEffect)((function(){var e=function(){return w.current&&clearTimeout(w.current)},t=function(){e(),F(T()),R(y,w,setTimeout(n,1e3*f))},n=function(){Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t();case 3:case"end":return e.stop()}}),e)})))()};return t(),L("reinitializing timer..."),function(){e()}}),[T,f]),Object(s.useEffect)((function(){var e=new S;e.results=Object(h.a)(n.results).sort(a.sortFunction),(e.results.length!==n.results.length||e.results.some((function(e,t){return e!==n.results[t]})))&&i(e),L("sorting list")}),[a,n.results]);var I=function(e){var t=e.results;return t.length?{averageSize:t.map((function(e){return e.size})).reduce((function(e,t){return e+t}))/t.length,biggest:Math.max.apply(Math,Object(h.a)(t.map((function(e){return e.size})))),latestDate:t.map((function(e){return e.getTime()})).reduce((function(e,t){return e.getTime()>t.getTime()?e:t}))}:{averageSize:0,biggest:0,latestDate:new Date}}(n),A=I.averageSize,M=I.biggest,J=I.latestDate;return Object(z.jsx)(m.Provider,{value:{sortOption:a,setSortOption:u,pollTime:f,setPollTime:x,nextRefreshTime:q},children:Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)("header",{children:Object(z.jsx)("h1",{children:"\ud83c\udf0e Earthquake Index"})}),Object(z.jsxs)("main",{style:{width:"70%",margin:"0 auto"},children:[Object(z.jsx)(B,{}),Object(z.jsx)(P,{averageSize:A,biggest:M,latestDate:J}),Object(z.jsx)(C,{earthquakes:n})]})]})})};o.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(J,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b0877001.chunk.js.map